<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>R on Boaz Sobrado's Website</title><link>https://boazsobrado.com/tags/r/</link><description>Recent content in R on Boaz Sobrado's Website</description><generator>Hugo</generator><language>en</language><copyright>&amp;copy; 2024 &lt;a href="https://www.boazsobrado.com/">Boaz Sobrado&lt;/a></copyright><lastBuildDate>Mon, 12 Aug 2019 13:11:22 +0800</lastBuildDate><atom:link href="https://boazsobrado.com/tags/r/index.xml" rel="self" type="application/rss+xml"/><item><title>Automating my business</title><link>https://boazsobrado.com/blog/2019/08/12/automating-my-business/</link><pubDate>Mon, 12 Aug 2019 13:11:22 +0800</pubDate><guid>https://boazsobrado.com/blog/2019/08/12/automating-my-business/</guid><description>&lt;p>As a small business owner keeping track of things can be surprisingly difficult: how you spend your money, who owes you money, who you owe money, what are your expenses, margins, operating costs&amp;hellip;&lt;/p>
&lt;p>If you have multiple revenue streams from multiple platforms, you can quickly reach a point where you ignore basic things, like for example how much you are making exactly. Specially when you are focused on numerous other things as you try to scale your business. I am guilty of having neglected this in the past.&lt;/p></description></item><item><title>Where I was in 2018</title><link>https://boazsobrado.com/blog/2019/01/13/where-i-was-in-2018/</link><pubDate>Sun, 13 Jan 2019 22:52:56 +0800</pubDate><guid>https://boazsobrado.com/blog/2019/01/13/where-i-was-in-2018/</guid><description>&lt;p>I spent a lot of time this year on the road. I started 2018 on a tropical beach in the Phillipines and ended it in Lisbon, with a lot of trips in between. Given that I spent a good part of this year playing around with maps for my thesis, I thought it would be fun to use my Google Location Services data to animate my movement this year. Here is the result:&lt;/p>
&lt;p>&lt;img src="https://boazsobrado.com/images/2me2018.gif" alt="image">&lt;/p>
&lt;h2 id="how-did-i-make-this-animation">How did I make this animation?&lt;/h2>
&lt;p>First, I download my Location History using &lt;a href="https://takeout.google.com/settings/takeout">Google Takeout&lt;/a>. Then, I extracted the relevant data from the resulting JSON file using this code in R:&lt;/p></description></item><item><title>Automating SMS &amp; email</title><link>https://boazsobrado.com/blog/2018/11/08/automating-sms-email/</link><pubDate>Thu, 08 Nov 2018 13:11:22 +0800</pubDate><guid>https://boazsobrado.com/blog/2018/11/08/automating-sms-email/</guid><description>&lt;p>I face the following problem: I get a lot of similarly formatted emails that require some sort of action that can in theory be easily automated. For example, I get Woocommerce order notifications that I want to forward selectively to my team via SMS.&lt;/p>
&lt;p>It turns out there is no Gmail extension that will help you do that (or at least I didn&amp;rsquo;t find anything like it). A better programmer would alter the php code of the Woocommerce site to interact with the API of a service like &lt;a href="https://www.smsglobal.com/">SMSGLOBAL&lt;/a>. I couldn&amp;rsquo;t quite wrap my head around the php code, and it didn&amp;rsquo;t really solve the issue of the other types of emails I get that require relatively automation.&lt;/p></description></item><item><title>Cuba’s short term property rental market 2017-2018</title><link>https://boazsobrado.com/blog/2018/08/11/cubas-short-term-property-rental-market-2017-2018/</link><pubDate>Sat, 11 Aug 2018 13:11:22 +0800</pubDate><guid>https://boazsobrado.com/blog/2018/08/11/cubas-short-term-property-rental-market-2017-2018/</guid><description>&lt;p>In July of 2017 President Trump announced with much fanfare a &lt;a href="https://www.bbc.com/news/av/world-us-canada-42345919/what-s-changed-in-us-cuba-relations-under-trump">new policy towards Cuba&lt;/a>. This was following the Obama administrations &amp;ldquo;thaw&amp;rdquo; in Cuban-American bilateral relations, which had lead to a noticable rise in Americas visiting the island. Then more bad news for the Cuban tourism industry:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://en.wikipedia.org/wiki/Havana_syndrome">sonic warfare in the news&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.9news.com.au/world/2019/01/29/05/49/cuba-hurricane-three-dead-eastern-havana">hurricanes&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>All of this together had a noticable impact on the Cuban tourism sector. &lt;a href="http://www.escambray.cu/2018/cuba-mira-con-fuerza-a-los-cinco-millones-de-visitantes-extranjeros-en-2019/">Official Cuban statistics&lt;/a> show that tourism numbers are going up. This year there were a record number of visits. However, the truth is much more nuanced. Tourists &lt;em>flying&lt;/em> in to Cuba actually decreased by 6 percent. There was a strong rise in cruise ship passengers (48%), however the methodology of counting each disembarcation of a passenger as an extra visit might inflate tourism numbers. Moreover, cruise ship passengers spend less, particularly on acccommodation (they sleep on the boat).&lt;/p></description></item><item><title>Leaflet timeline in R</title><link>https://boazsobrado.com/blog/2018/02/08/leaflet-timeline-in-r/</link><pubDate>Thu, 08 Feb 2018 15:52:58 +0200</pubDate><guid>https://boazsobrado.com/blog/2018/02/08/leaflet-timeline-in-r/</guid><description>&lt;p>&lt;a href="https://rstudio.github.io/leaflet/">Leaflet&lt;/a> is a powerful tool for visualasing spatial data in R. However, after much googling I could not find an easy way to create a timeline to visualise changes in time. Therefore, I decided to create a simple shiny app that does it.&lt;/p>
&lt;h2 id="raw-android-gps-movements">Raw Android GPS Movements&lt;/h2>
&lt;h3 id="code">Code&lt;/h3>
&lt;p>The code below takes raw location measurements from my Android phone visualises them over time. The size of the circle is the confidence interval of the measurement. Before you go and try to find me at those spots, I no longer live there!&lt;/p></description></item><item><title>Time Series analysis for Facebook message volume</title><link>https://boazsobrado.com/blog/2017/12/17/time-series-analysis-for-facebook-message-volume/</link><pubDate>Sun, 17 Dec 2017 22:52:56 +0800</pubDate><guid>https://boazsobrado.com/blog/2017/12/17/time-series-analysis-for-facebook-message-volume/</guid><description>&lt;h2 id="introduction-to-the-data-set">Introduction to the data set&lt;/h2>
&lt;p>The data is the amount of Facebook messages a user (me) sent and received between 2011 and 2016. The data was exported from Facebook, converted from HTML to JSON and subsequently read into R. For more details on how this was done, please consult &lt;a href="http://boazsobrado.com/blog/2016/10/29/how-to-get-your-facebook-messages-into-r/">here&lt;/a>.&lt;/p>
&lt;p>The original data source contains 413,101 timestamps and messages between 2008 and 2016. The volume of messages is very low between 2008-2011, and highly atypical to the rest of the series, so it was not considered in the sample. An example is shown below:&lt;/p></description></item><item><title>Time Series analysis for Facebook message volume</title><link>https://boazsobrado.com/blog/2017/12/01/time-series-analysis-for-facebook-message-volume/</link><pubDate>Fri, 01 Dec 2017 15:52:58 +0200</pubDate><guid>https://boazsobrado.com/blog/2017/12/01/time-series-analysis-for-facebook-message-volume/</guid><description>&lt;h2>Introduction to the data set&lt;/h2>
&lt;p>The data is the amount of Facebook messages a user (me) sent and received between 2011 and 2016. The data was exported from Facebook, converted from HTML to JSON and subsequently read into R. For more details on how this was done, please consult &lt;a href="http://boazsobrado.com/blog/2016/10/29/how-to-get-your-facebook-messages-into-r/">here&lt;/a>.&lt;/p>
&lt;p>The original data source contains 413,101 timestamps and messages between 2008 and 2016. The volume of messages is very low between 2008-2011, and highly atypical to the rest of the series, so it was not considered in the sample. An example is shown below:&lt;/p></description></item><item><title>Costa Rican Saints</title><link>https://boazsobrado.com/blog/2017/08/18/costa-rican-saints/</link><pubDate>Fri, 18 Aug 2017 22:22:16 -0800</pubDate><guid>https://boazsobrado.com/blog/2017/08/18/costa-rican-saints/</guid><description>&lt;p>One of the first things a traveller notices when going to Costa Rica is that almost every town or city is named after a Saint. Growing up in Costa Rica, I just assumed this was something true of all Latin American countries, a legacy of Spanish colonial times. California has San Jose, San Fransisco, etc. I thought it was like that from California to Argentina.&lt;/p>
&lt;p>After some travelling in Latin America I realised this was simply not true. Cuba is exceptionally adept at original names (e.g. Guantanamo). Even neighbouring Nicaragua seemed to have more varied names. It turns out Costa Ricans are particularly unoriginal with names, after all approximately 10% of the population&amp;rsquo;s last name is &lt;a href="http://forebears.io/costa-rica#surnames">Rodriguez, Vargas, Jimenez, Mora or Rojas&lt;/a>. Similarly, 16% of all locations were named after a saint.&lt;/p></description></item><item><title>Bayesian Images</title><link>https://boazsobrado.com/blog/2017/05/22/bayesian-images/</link><pubDate>Mon, 22 May 2017 22:22:16 -0800</pubDate><guid>https://boazsobrado.com/blog/2017/05/22/bayesian-images/</guid><description>&lt;p>Graphs to accompany my poster presentation.&lt;/p>
&lt;h2 id="the-data-set">The data set&lt;/h2>
&lt;p>The generated data is plotted below:
&lt;img src="https://boazsobrado.com/images/explorePlot.png" alt="data">&lt;/p>
&lt;h2 id="metropolis-hastings-algorithm">Metropolis Hastings Algorithm&lt;/h2>
&lt;p>&lt;img src="https://boazsobrado.com/images/metropolis_hastings2.gif" alt="mhalgo">&lt;/p>
&lt;p>This visual explanation of the Metropolis Hastings algorithm shows the proposal and the true density along with the Metropolis Hastings step. It was inspired and adapted from code by &lt;a href="https://www.researchgate.net/profile/Balazs_Toeroek6">Balazs Torok&lt;/a>.&lt;/p>
&lt;h2 id="diagnostic-plots-for-beta-2-via-gibbs-sampler">Diagnostic Plots for Beta 2 via Gibbs Sampler&lt;/h2>
&lt;h3 id="autocorrelation-plot">Autocorrelation Plot&lt;/h3>
&lt;p>&lt;img src="https://boazsobrado.com/images/acfb2.png" alt="acf">&lt;/p>
&lt;p>The autocorrelations are negligable, suggesting good mixing.&lt;/p>
&lt;h3 id="running-means-plot">Running Means Plot&lt;/h3>
&lt;p>&lt;img src="https://boazsobrado.com/images/b2runningmeans.png" alt="rmp">&lt;/p>
&lt;p>The running means have settled.&lt;/p></description></item><item><title>You are wasting your time with spreadsheets</title><link>https://boazsobrado.com/blog/2016/11/13/you-are-wasting-your-time-with-spreadsheets/</link><pubDate>Sun, 13 Nov 2016 15:52:58 +0200</pubDate><guid>https://boazsobrado.com/blog/2016/11/13/you-are-wasting-your-time-with-spreadsheets/</guid><description>&lt;p>This week I had an interesting conversation (as interesting as these conversations can get) about the use of spreadsheets in business. I am still a little bit surprised by how often they are used for things they are not really good for. Now, I don’t want to write about how there are &lt;a href="http://blog.revolutionanalytics.com/2014/10/why-r-is-better-than-excel.html">better alternatives to spreadsheets&lt;/a>. Instead, I’d like to illustrate how powerful non-spreadsheet tools are by describing a task I completed this week using R.&lt;/p></description></item><item><title>How to get your Facebook messages into R</title><link>https://boazsobrado.com/blog/2016/10/29/how-to-get-your-facebook-messages-into-r/</link><pubDate>Sat, 29 Oct 2016 15:52:58 +0200</pubDate><guid>https://boazsobrado.com/blog/2016/10/29/how-to-get-your-facebook-messages-into-r/</guid><description>&lt;p>It is a truism that we live in the information age, yet on a day to day basis we engage remarkably little with insights on the personal information we create. Sure, Netflix shows you films you want to see, Amazon offers books you want to buy and Facebook shows you pictures of cats with boobs or whatever it is you tend to click on, but explicit purpose of that is to get your money. What about using all that data to gain insights on who you are, who your friends are, what you tend to talk about? Introspection has a long history, but &lt;a href="https://www.wikiwand.com/en/Wilhelm_Wundt">Wundt&lt;/a> wasn&amp;rsquo;t particularly data-driven.&lt;/p></description></item><item><title>Where I slept in 2015</title><link>https://boazsobrado.com/blog/2015/12/22/where-i-slept-in-2015/</link><pubDate>Tue, 22 Dec 2015 22:22:16 -0800</pubDate><guid>https://boazsobrado.com/blog/2015/12/22/where-i-slept-in-2015/</guid><description>&lt;p>This year has been an adventure. I&amp;rsquo;ve been on three continents, countless countries and dozens of cities.
I thought it would be an interesting project to quantify it all by visualising on a map the places where I slept.
This is the result:
&lt;img src="https://boazsobrado.com/images/Asia2015.png" alt="Asia">
&lt;img src="https://boazsobrado.com/images/EU2015.png" alt="EU">
&lt;img src="https://boazsobrado.com/images/USA2015.png" alt="USA">&lt;/p>
&lt;p>imgLeft: images/USA2015.png&lt;/p>
&lt;p>In case you are interested in how I did it you can find the code below. I was inspired by &lt;a href="http://blog.revolutionanalytics.com/2015/11/marriott.html">this&lt;/a> blog post.&lt;/p>
&lt;pre>&lt;code>library(readr)
library(ggmap)
library(&amp;quot;shiny&amp;quot;)

days&amp;lt;-read_csv(&amp;quot;daysinayear/days.csv&amp;quot;)# spreadsheet with place in one column and days slept in another
devtools::install_github(&amp;quot;bwlewis/rthreejs&amp;quot;)
#First step: get lat and lng for where I've slept using Google Maps API
x&amp;lt;-geocode(days$Location)
days&amp;lt;-cbind(days,x)

# Make a cool spinning globe
globejs(img=&amp;quot;http://2.bp.blogspot.com/-Jfw4jY6vBWM/UkbwZhdKxuI/AAAAAAAAK94/QTmtnuDFlC8/s1600/2_no_clouds_4k.jpg&amp;quot;,
 lat = days$lat,lon = days$lon, value=days$Days,bg=&amp;quot;white&amp;quot;, atmosphere = TRUE, color = &amp;quot;red&amp;quot;)

#create the square plots for Asia, Europe and USA
windows(6,6);
asiaPlot &amp;lt;- qmap(location = &amp;quot;Asia&amp;quot;, zoom = 3, legend = &amp;quot;none&amp;quot;, maptype = &amp;quot;satellite&amp;quot;, darken = 0.01, extent = &amp;quot;device&amp;quot;)
asiaPlot &amp;lt;- asiaPlot +
 geom_point(data = days, aes(y = lat, x = lon, colour = &amp;quot;blue&amp;quot;, size=Days, alpha=.5,show_guide = FALSE))+
 guides(color=F, size = F,alpha = F)
(asiaPlot &amp;lt;- asiaPlot + scale_size_continuous(range = c(3,10)))

windows(6,6);
eurPlot &amp;lt;- qmap(location = &amp;quot;Europe&amp;quot;, zoom = 3, legend = &amp;quot;none&amp;quot;, maptype = &amp;quot;satellite&amp;quot;, darken = 0.01, extent = &amp;quot;device&amp;quot;)
eurPlot &amp;lt;- eurPlot +
 geom_point(data = days, aes(y = lat, x = lon, colour = &amp;quot;blue&amp;quot;, size=Days, alpha=.5,show_guide = FALSE))+
 guides(color=F, size = F,alpha = F)
(eurPlot &amp;lt;- eurPlot + scale_size_continuous(range = c(3,10)))

usPlot &amp;lt;- qmap(location = &amp;quot;USA&amp;quot;, zoom = 3, legend = &amp;quot;none&amp;quot;, maptype = &amp;quot;satellite&amp;quot;, darken = 0.01, extent = &amp;quot;device&amp;quot;)
usPlot &amp;lt;- usPlot +
 geom_point(data = days, aes(y = lat, x = lon, colour = &amp;quot;blue&amp;quot;, size=Days, alpha=.5,show_guide = FALSE))+
 guides(color=F, size = F,alpha = F)
(usPlot &amp;lt;- usPlot + scale_size_continuous(range = c(3,10)))

&lt;/code>&lt;/pre></description></item><item><title>Using Google Maps API: Mol Bubi Competition</title><link>https://boazsobrado.com/blog/2015/11/05/using-google-maps-api-mol-bubi-competition/</link><pubDate>Thu, 05 Nov 2015 11:36:16 +0100</pubDate><guid>https://boazsobrado.com/blog/2015/11/05/using-google-maps-api-mol-bubi-competition/</guid><description>&lt;p>A few friends and I are involved in the Budapest public bicycle data science &lt;a href="https://dms.sztaki.hu/bubi/#/app/home">competition&lt;/a>. As of right now we are in the top ten, although in all honesty, it hasn&amp;rsquo;t really started yet.
We signed a non-disclosure agreement, so I cannot really share any cool details. What I can share however, is the function I wrote in R to get calculate the distances and duration of bike trips using Google Maps&amp;rsquo; &lt;a href="https://developers.google.com/maps/?hl=en">API&lt;/a>.&lt;/p>
&lt;pre>&lt;code>#distance calucations
#### This script uses RCurl and RJSONIO to download data from Google's API

library(RCurl)
library(RJSONIO)

#define api key as: api&amp;lt;-&amp;quot;YOURAPI&amp;quot;
#the function assumes address input in following dataframe:
#lat1,lng1,lat2,lng2

DistDur &amp;lt;- function(address,time = as.integer(Sys.time()),mode, return.call = &amp;quot;json&amp;quot;, sensor = &amp;quot;false&amp;quot;) {
 address1&amp;lt;-paste(address[,1],address[,2], sep=&amp;quot; &amp;quot;)
 address2&amp;lt;-paste(address[,3],address[,4], sep=&amp;quot; &amp;quot;)
 root &amp;lt;- &amp;quot;https://maps.googleapis.com/maps/api/directions/&amp;quot;
 u &amp;lt;- paste(root, return.call, &amp;quot;?origin=&amp;quot;, address1, &amp;quot;&amp;amp;destination=&amp;quot;,address2,&amp;quot;&amp;amp;departure_time=&amp;quot;,time,&amp;quot;&amp;amp;mode=&amp;quot;,mode,&amp;quot;&amp;amp;key=&amp;quot;,api,sep = &amp;quot;&amp;quot;)
 for (a in 1:length(u)){
 url&amp;lt;-URLencode(u[a])
 doc &amp;lt;- getURL(url)
 x &amp;lt;- fromJSON(doc,simplify = FALSE)
 dist&amp;lt;-0
 dura&amp;lt;-0
 for (i in 1:length(x$routes[[1]]$legs[[1]]$steps))
 {
 dist&amp;lt;-x$routes[[1]]$legs[[1]]$steps[[i]]$distance$value+dist
 dura&amp;lt;-x$routes[[1]]$legs[[1]]$steps[[i]]$duration$value+dura
 }
 address$dura[a]&amp;lt;-dura
 address$dist[a]&amp;lt;-dist
 }
 return(address)
}
&lt;/code>&lt;/pre>
&lt;p>The code itself is quite simple, but its my first time using the Google Maps API and I was amazed by how easy it was. This and more can be found on my &lt;a href="www.github.com/sobradob">Github&lt;/a>.&lt;/p></description></item><item><title>Do stupid people make more spelling mistakes? An analysis with R.</title><link>https://boazsobrado.com/blog/2015/10/20/do-stupid-people-make-more-spelling-mistakes-an-analysis-with-r./</link><pubDate>Tue, 20 Oct 2015 10:23:55 +0200</pubDate><guid>https://boazsobrado.com/blog/2015/10/20/do-stupid-people-make-more-spelling-mistakes-an-analysis-with-r./</guid><description>&lt;p>English orthography is a tricky topic. Most people learning English (and a great number of native speakers) are puzzled by a written language with an utter disregard for phonemic representation. It is therefore very worrying that individuals intuitively assume making orthographic mistakes is a sign of &lt;a href="http://www.businessinsider.com/common-spelling-mistakes-2015-6">low intelligence&lt;/a> or unprofessionalism. In this post we are going to show how we looked into the relationship of IQ and orthography using R. We are going to need two things:&lt;/p></description></item></channel></rss>